"use strict";(self.webpackChunkprivatni_vrtic=self.webpackChunkprivatni_vrtic||[]).push([[765],{2964:(R,b,r)=>{r.d(b,{d:()=>P});var i=r(2633),g=r(1438),s=r(5e3),m=r(4937),f=r(4015),y=r(6209),S=r(7725),T=r(2268),D=r(9808),O=r(3544),v=r(3075);const C=["scheduleObj"];function x(_,d){1&_&&(s.TgZ(0,"div",2),s._UZ(1,"app-loader"),s.qZA())}function E(_,d){if(1&_){const e=s.EpF();s.TgZ(0,"div",7)(1,"div")(2,"app-dynamic-forms",8,9),s.NdJ("submit",function(n){return s.CHM(e),s.oxw(2).submitEmitter(n)}),s.qZA()()()}if(2&_){const e=s.oxw(2);s.xp6(2),s.Q6J("config",e.config)}}function M(_,d){if(1&_&&(s.TgZ(0,"e-resources"),s._UZ(1,"e-resource",10),s.qZA()),2&_){const e=s.oxw(2);s.xp6(1),s.Q6J("field",e.config.resources.field)("dataSource",e.resources)("allowMultiple",null==e.config.resources?null:e.config.resources.allowMultipleOwner)("idField",e.config.resources.idField)("colorField",e.config.resources.colorField)}}function j(_,d){if(1&_){const e=s.EpF();s.TgZ(0,"ejs-schedule",3,4),s.NdJ("popupOpen",function(n){return s.CHM(e),s.oxw().onPopupOpen(n)})("actionBegin",function(n){return s.CHM(e),s.oxw().actionBegin(n)})("actionComplete",function(n){return s.CHM(e),s.oxw().actionComplete(n)})("dataBound",function(n){return s.CHM(e),s.oxw().onDataBound(n)})("renderCell",function(n){return s.CHM(e),s.oxw().onRenderCell(n)}),s.YNc(2,E,4,1,"ng-template",null,5,s.W1O),s.YNc(4,M,2,5,"e-resources",6),s.qZA()}if(2&_){const e=s.oxw();s.Q6J("height",e.height)("views",null==e.config?null:e.config.views)("eventSettings",e.eventSettings)("showQuickInfo",null==e.config?null:e.config.showQuickInfo)("currentView",null==e.config?null:e.config.currentView)("startHour",null==e.config?null:e.config.startHour)("endHour",null==e.config?null:e.config.endHour)("interval",null==e.config?null:e.config.interval),s.xp6(4),s.Q6J("ngIf",null==e.config?null:e.config.resources)}}let P=(()=>{class _{constructor(e,o,n,t,c){this.configurationService=e,this.helpService=o,this.apiService=n,this.toastr=t,this.router=c,this.eventSettings={},this.loader=!1,this.data=[],this.resources=[],this.isTootipDelayApplied=!1}ngOnInit(){this.loader=!0,this.initializeConfig()}onResize(){this.height=this.helpService.getHeightForSchedulerWithoutPx(this.partOfTab)}initializeConfig(){this.language=this.helpService.getLanguage(),this.configurationService.getConfiguration(this.path,this.file).subscribe(e=>{var o;this.config=e,this.getData(null===(o=this.config)||void 0===o?void 0:o.request),this.config.resources&&this.getResources(),this.initializeSchedulerConfig(),this.height=this.helpService.getHeightForSchedulerWithoutPx(this.partOfTab)})}initializeSchedulerConfig(){var e,o,n,t,c,l,a,p,h,u,I;(null===(e=this.config)||void 0===e?void 0:e.tooltip)&&(null===(n=null===(o=this.config)||void 0===o?void 0:o.tooltip)||void 0===n?void 0:n.display)&&(this.eventSettings.enableTooltip=null===(c=null===(t=this.config)||void 0===t?void 0:t.tooltip)||void 0===c?void 0:c.display),(null===(l=this.config)||void 0===l?void 0:l.editOptions)&&((void 0!==(null===(a=this.config)||void 0===a?void 0:a.editOptions.allowAdding)||null!==(null===(p=this.config)||void 0===p?void 0:p.editOptions.allowAdding))&&(this.eventSettings.allowAdding=null===(h=this.config)||void 0===h?void 0:h.editOptions.allowAdding),(void 0!==this.config.editOptions.allowEditing||(null===(u=this.config)||void 0===u?void 0:u.editOptions.allowEditing))&&(this.eventSettings.allowEditing=this.config.editOptions.allowEditing),(void 0!==this.config.editOptions.allowDeleting||(null===(I=this.config)||void 0===I?void 0:I.editOptions.allowDeleting))&&(this.eventSettings.allowDeleting=this.config.editOptions.allowDeleting))}getData(e){let o="";e.parameters&&(o=this.helpService.getRequestDataParameters(this.router.snapshot.params,e.parameters)),this.apiService.callGetMethod(e.api,o).subscribe(n=>{var t;this.eventSettings.dataSource=n||[],(null===(t=this.config)||void 0===t?void 0:t.resources)||(this.loader=!1)},n=>{this.eventSettings.dataSource=[],this.loader=!1})}getResources(){var e;this.loader=!0,(null===(e=this.config)||void 0===e?void 0:e.resources)?this.apiService.callGetMethod(this.config.resources.request.api,"").subscribe(o=>{this.resources=o,this.loader=!1},o=>{this.resources=[]}):this.loader=!1}onPopupOpen(e){"QuickInfo"===e.type&&(this.selectedData=e.data,setTimeout(()=>{var o;this.setValue(null===(o=this.config)||void 0===o?void 0:o.config,this.selectedData)},50))}onDataBound(){var e,o,n,t,c,l;if(null===(o=null===(e=this.config)||void 0===e?void 0:e.tooltip)||void 0===o?void 0:o.display){let a=this.scheduleObj.element.ej2_instances[2];a.mouseTrail=!1,a.openDelay=null===(t=null===(n=this.config)||void 0===n?void 0:n.tooltip)||void 0===t?void 0:t.openDelay,a.position=null===(l=null===(c=this.config)||void 0===c?void 0:c.tooltip)||void 0===l?void 0:l.position}}onRenderCell(e){e.date<new Date&&e.element.classList.add("e-disable-dates")}actionBegin(e){var o,n,t,c;if("toolbarItemRendering"===e.requestType){if(null===(n=null===(o=this.config)||void 0===o?void 0:o.toolbar)||void 0===n?void 0:n.exportToExcel){const l={align:"Right",showTextOn:"Both",prefixIcon:"e-icon-schedule-excel-export",text:this.language.exportToExcelScheduler,cssClass:"e-excel-export",click:this.exportExcel.bind(this)};e.items.push(l)}if(null===(c=null===(t=this.config)||void 0===t?void 0:t.toolbar)||void 0===c?void 0:c.print){const l={align:"Right",showTextOn:"Both",prefixIcon:"e-icon-schedule-print",text:this.language.printScheduler,cssClass:"e-print",click:this.printScheduler.bind(this)};e.items.push(l)}}}actionComplete(e){"eventCreated"===e.requestType?this.createData(e.addedRecords[0]):"eventChanged"===e.requestType?this.updateData(e.changedRecords[0]):"eventRemoved"===e.requestType&&this.deleteData(e.deletedRecords[0])}createData(e){e=this.convertSubmitValue(e),this.callApi(this.config.editSettingsRequest.add,e)}updateData(e){delete e.Id,e=this.convertSubmitValue(e),this.callApi(this.config.editSettingsRequest.edit,e);const o=this.eventSettings.dataSource.findIndex(n=>n.id==e.id);this.eventSettings.dataSource[o]=e}deleteData(e){delete e.Id,this.callApi(this.config.editSettingsRequest.delete,e);const o=this.eventSettings.dataSource.findIndex(n=>n.id==e.id);this.eventSettings.dataSource.splice(o,1)}callApi(e,o,n){if("POST"===e.type.toUpperCase())this.callApiPost(e.api,o,n);else if(e.url){const t=this.helpService.getRequestDataParameters(this.router.snapshot.params,e.url);this.callApiGet(e.api,t)}else{const t=this.helpService.getRequestDataParameters(this.router.snapshot.params,e.parameters);this.callApiGet(e.api,t)}}callApiPost(e,o,n){this.apiService.callPostMethod(e,o).subscribe(t=>t?(this.toastr.showSuccess(),n?(this.scheduleObj.refreshEvents(),!0):(this.scheduleObj.refreshEvents(),t)):(this.toastr.showError(),!1),t=>(this.toastr.showError(),!1))}callApiGet(e,o,n){this.apiService.callGetMethod(e,o).subscribe(t=>!!t&&!n&&t,t=>!1)}setValue(e,o){for(let n=0;n<e.length;n++)void 0!==this.form&&this.form.setValue(e[n].name,this.helpService.convertValueToSpecificType(o[e[n].name],this.config.config[n].type),e[n].type),this.config.config[n].value=this.helpService.convertValueToSpecificType(o[e[n].name],this.config.config[n].type)}convertSubmitValue(e){var o,n,t,c,l,a,p,h;if(null===(o=this.config)||void 0===o?void 0:o.convertSubmitValue)for(let u=0;u<(null===(n=this.config)||void 0===n?void 0:n.convertSubmitValue.length);u++)e[this.config.convertSubmitValue[u].field]=this.helpService.convertValueToSpecificType(e[this.config.convertSubmitValue[u].field],null!==(t=this.config.convertSubmitValue[u].type)&&void 0!==t?t:"");if(null===(c=this.config)||void 0===c?void 0:c.displayFieldForSubject){e.Subject="";for(let u=0;u<this.config.displayFieldForSubject.length;u++)void 0!==e[null===(l=this.config)||void 0===l?void 0:l.displayFieldForSubject[u]]&&null!==e[null===(a=this.config)||void 0===a?void 0:a.displayFieldForSubject[u]]?e.Subject+=e[null===(p=this.config)||void 0===p?void 0:p.displayFieldForSubject[u]]:e.Subject+=null===(h=this.config)||void 0===h?void 0:h.displayFieldForSubject[u]}return e}exportExcel(){this.scheduleObj.exportToExcel()}printScheduler(){this.scheduleObj.print()}}return _.\u0275fac=function(e){return new(e||_)(s.Y36(m.e),s.Y36(f.s),s.Y36(y.f),s.Y36(S.l),s.Y36(T.gz))},_.\u0275cmp=s.Xpm({type:_,selectors:[["app-dynamic-scheduler"]],viewQuery:function(e,o){if(1&e&&(s.Gf(g.b,5),s.Gf(C,5)),2&e){let n;s.iGM(n=s.CRH())&&(o.form=n.first),s.iGM(n=s.CRH())&&(o.scheduleObj=n.first)}},hostBindings:function(e,o){1&e&&s.NdJ("resize",function(t){return o.onResize(t)},!1,s.Jf7)},inputs:{path:"path",file:"file",partOfTab:"partOfTab"},features:[s._Bn([i.Rg,i.F$,i.ZP,i.Tk,i.r3,i.im,i._Y,i.Ct,i.Ar,i._q,i.jU,i.U0,i.$b])],decls:2,vars:2,consts:[["style","height: 70vh",4,"ngIf"],["width","100%",3,"height","views","eventSettings","showQuickInfo","currentView","startHour","endHour","interval","popupOpen","actionBegin","actionComplete","dataBound","renderCell",4,"ngIf"],[2,"height","70vh"],["width","100%",3,"height","views","eventSettings","showQuickInfo","currentView","startHour","endHour","interval","popupOpen","actionBegin","actionComplete","dataBound","renderCell"],["scheduleObj",""],["editorTemplate",""],[4,"ngIf"],["ngForm",""],[3,"config","submit"],["form","dynamicForm"],["textField","color",3,"field","dataSource","allowMultiple","idField","colorField"]],template:function(e,o){1&e&&(s.YNc(0,x,2,0,"div",0),s.YNc(1,j,5,9,"ejs-schedule",1)),2&e&&(s.Q6J("ngIf",o.loader),s.xp6(1),s.Q6J("ngIf",!o.loader))},directives:[D.O5,O.R,i.ic,v.JL,v.F,g.b,i.Ye,i.h2],styles:[".e-footer-content{display:none}.e-disable-dates{pointer-events:none}\n"],encapsulation:2}),_})()},765:(R,b,r)=>{r.d(b,{r:()=>n});var i=r(5e3),g=r(4937),s=r(4015),m=r(9808),f=r(1123),y=r(5216),S=r(1438),T=r(8743),D=r(2964);const O=["element"];function v(t,c){if(1&t&&i._UZ(0,"app-dynamic-grid",7),2&t){const l=i.oxw(2).$implicit;i.Q6J("path",l.path)("file",l.file)("partOfTab",!0)}}function C(t,c){1&t&&i.YNc(0,v,1,3,"ng-template",null,6,i.W1O)}function x(t,c){if(1&t&&i._UZ(0,"app-dynamic-forms",8),2&t){const l=i.oxw(2).$implicit;i.Q6J("path",l.path)("file",l.file)("disableEdit",!0)}}function E(t,c){1&t&&i.YNc(0,x,1,3,"ng-template",null,6,i.W1O)}function M(t,c){if(1&t&&i._UZ(0,"app-dynamic-action-button",10),2&t){const l=i.oxw(3).$implicit;i.Q6J("data",l.actionButtons)}}function j(t,c){if(1&t&&(i.YNc(0,M,1,1,"app-dynamic-action-button",9),i._UZ(1,"app-dynamic-scheduler",7)),2&t){const l=i.oxw(2).$implicit;i.Q6J("ngIf",l.actionButtons),i.xp6(1),i.Q6J("path",l.path)("file",l.file)("partOfTab",!0)}}function P(t,c){1&t&&i.YNc(0,j,2,4,"ng-template",null,6,i.W1O)}function _(t,c){if(1&t&&i._UZ(0,"app-dynamic-tabs",11),2&t){const l=i.oxw(2).$implicit;i.Q6J("path",l.path)("file",l.file)}}function d(t,c){1&t&&i.YNc(0,_,1,2,"ng-template",null,6,i.W1O)}function e(t,c){if(1&t&&(i.TgZ(0,"e-tabitem",4),i.YNc(1,C,2,0,null,5),i.YNc(2,E,2,0,null,5),i.YNc(3,P,2,0,null,5),i.YNc(4,d,2,0,null,5),i.qZA()),2&t){const l=c.$implicit,a=i.oxw(2);i.Q6J("header",l.title),i.xp6(1),i.Q6J("ngIf","grid"===l.type&&a.helpService.checkRights(l.rights)),i.xp6(1),i.Q6J("ngIf","forms"===l.type&&a.helpService.checkRights(l.rights)),i.xp6(1),i.Q6J("ngIf","scheduler"===l.type&&a.helpService.checkRights(l.rights)),i.xp6(1),i.Q6J("ngIf","tabs"===l.type&&a.helpService.checkRights(l.rights))}}function o(t,c){if(1&t&&(i.TgZ(0,"ejs-tab",1,2)(2,"e-tabitems"),i.YNc(3,e,5,5,"e-tabitem",3),i.qZA()()),2&t){const l=i.oxw();i.xp6(3),i.Q6J("ngForOf",l.config)}}let n=(()=>{class t{constructor(l,a){this.configurationService=l,this.helpService=a,this.config=[]}ngOnInit(){this.initializeConfig()}initializeConfig(){this.configurationService.getConfiguration(this.path,this.file).subscribe(l=>{for(let a=0;a<l.length;a++)this.helpService.checkRights(l[a].rights)&&this.config.push(l[a]);setTimeout(()=>{this.tabObj.element.classList.add("e-fill")},50)})}}return t.\u0275fac=function(l){return new(l||t)(i.Y36(g.e),i.Y36(s.s))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-dynamic-tabs"]],viewQuery:function(l,a){if(1&l&&i.Gf(O,5),2&l){let p;i.iGM(p=i.CRH())&&(a.tabObj=p.first)}},inputs:{path:"path",file:"file"},decls:1,vars:1,consts:[["id","tab_default","overflowMode","Popup",4,"ngIf"],["id","tab_default","overflowMode","Popup"],["element",""],[3,"header",4,"ngFor","ngForOf"],[3,"header"],[4,"ngIf"],["content",""],[3,"path","file","partOfTab"],[3,"path","file","disableEdit"],[3,"data",4,"ngIf"],[3,"data"],[3,"path","file"]],template:function(l,a){1&l&&i.YNc(0,o,4,1,"ejs-tab",0),2&l&&i.Q6J("ngIf",a.config)},directives:[m.O5,f.id,f.dO,m.sg,f.wv,y.d,S.b,T.O,D.d,t],styles:[""]}),t})()}}]);